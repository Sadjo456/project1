<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="assest/css/mine.css" />
        <link rel="stylesheet" href="assest/css/header-footer.css" />
        <link rel="stylesheet" href="assest/css/normalize.css" />
        <title>Document</title>
    </head>
    <body>
        <header>
            <div class="nav-wrapper">
                <a href="/index.html"><img src="./assest/images/logo.png" alt="JoyShop" /></a>
                <ul>
                    <li><a href="/category/woman">Woman</a></li>
                    <li><a href="/category/men">Men</a></li>
                    <li><a href="/category/jewelery">Jewelery</a></li>
                    <li><a href="/category/electronics">Electronics</a></li>
                </ul>
                <div>
                    <div class="search-wrapper">
                        <input type="text" placeholder="Search for itmes and bands" />
                        <div class="search--icon">
                            <button>
                                <svg viewBox="0 0 17 17" role="img" aria-labelledby="search-icon">
                                    <title id="search-icon">Search</title>
                                    <path
                                        fill="currentColor"
                                        fill-rule="nonzero"
                                        d="M7.65 15.3a7.65 7.65 0 1 1 5.997-2.9c-.01.012 3.183 3.297 3.183 3.297l-1.22 1.18s-3.144-3.283-3.154-3.275A7.618 7.618 0 0 1 7.65 15.3zm0-2a5.65 5.65 0 1 0 0-11.3 5.65 5.65 0 0 0 0 11.3z"
                                    ></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="nav-icon">
                    <span class="cart-icon">
                        <a href=""
                            ><img
                                src="data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' height='var(--myaccount-icon-height)' width='var(--myaccount-icon-width)'%3E%3Cpath d='M18 17.987V7H2v11l16-.013zM4.077 5A5.996 5.996 0 0110 0c2.973 0 5.562 2.162 6.038 5H20v14.986L0 20V5h4.077zm9.902-.005C13.531 3.275 11.86 2 10 2 8.153 2 6.604 3.294 6.144 4.995c.92 0 7.654.03 7.835 0z' fill='%23FFF'/%3E%3C/svg%3E"
                            />
                        </a>
                    </span>
                </div>
            </div>
        </header>
        <main>
            <div class="product-container">
                <div class="product">
                    <div class="top-half">
                        <div class="overlay">
                            <div class="rating stars-container">
                                <span class="stars">★</span>
                                <span class="stars">★</span>
                                <span class="stars">★</span>
                                <span class="stars">★</span>
                                <span class="stars">★</span>
                            </div>
                            <div class="description">
                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Soluta, ipsa!
                            </div>
                            <button class="quick-buy">quick buy</button>
                        </div>
                        <img
                            src="https://fakestoreapi.com/img/71-3HjGNDUL._AC_SY879._SX._UX._SY._UY_.jpg"
                            alt=""
                            class="product--image"
                        />
                    </div>
                    <div class="bottom-half">
                        <div class="product--name">Lorem ipsum dolor sit amet consectetur.</div>
                        <div class="price-wrapper">
                            <span class="price previous-price">12.99</span>
                            <span class="price now-price">15.99</span>
                        </div>
                    </div>
                </div>
            </div>
            <script>
                "use strict";
                const fakeStoreUrl = {
                    url: "https://fakestoreapi.com/",
                    get products() {
                        return fetch(this.url + "products").then((response) => response.json());
                    },
                    category(category_name) {
                        console.log(this.url + "products/category/" + category_name);
                        return fetch(this.url + "products/category/" + category_name).then((response) =>
                            response.json()
                        );
                    },
                };
                // const categories = document.querySelectorAll("category-wrapper category category--name");
                const categories = ["electronics", "jewelery", "men's clothing", "women's clothing"];
                const productContainer = document.querySelector(".product-container");
                const addProduct = ({ id, title, category, description, price, rating, image }) => {
                    price = parseInt(price);
                    const stars = (() => {
                        const starCount = parseInt(rating.rate);
                        const Float = +rating.rate.toString().split(".")[1];
                        console.log(Float);
                        if (Float >= 3 && Float <= 6) return { count: starCount, star: " half" };
                        if (Float > 6) return { count: starCount + 1, star: " full" };
                        return { count: starCount - 1, star: " full" };
                    })();
                    const ratingStar = (index) => {
                        console.log(index, index == stars.count, stars.count);
                        if (index == stars.count) return stars.star;
                        return "";
                    };
                    const HTML = `
                    <div class="product">
                    <div class="top-half">
                        <div class="overlay">
                            <div class="rating stars-container">
                                <span class="stars${ratingStar(5)}">★</span>
                                <span class="stars${ratingStar(4)}">★</span>
                                <span class="stars${ratingStar(3)}">★</span>
                                <span class="stars${ratingStar(2)}">★</span>
                                <span class="stars${ratingStar(1)}">★</span>
                            </div>
                            <div class="description">${description}</div>
                            <button class="quick-buy">quick buy</button>
                        </div>
                        <img
                            src="${image}"
                            alt=""
                            class="product--image"
                        />
                    </div>
                    <div class="bottom-half">
                        <div class="product--name">${name}</div>
                        <div class="price-wrapper">
                            <span class="price previous-price">${(price * 1.15).toFixed(0) + 0.99}</span>
                            <span class="price now-price">${price + 0.99}</span>
                        </div>
                    </div>
                </div>
                    `;
                    productContainer.insertAdjacentHTML("beforeend", HTML);
                };
                console.log("here");
                productContainer.innerHTML = "";
                fakeStoreUrl.products.then((data) => data.forEach(addProduct));
                productContainer.innerHTML = "";
                fakeStoreUrl.category("electronics").then((data) => data.forEach(addProduct));
                fakeStoreUrl.category("electronics").then((data) => console.log(data));
            </script>
        </main>
        <footer>
            <section>
                <h4>HELP & INFORMATION</h4>
                <ul>
                    <li>Help</li>
                    <li>Track orders</li>
                    <li>Delivery & returns</li>
                    <li>Premium Delivery</li>
                    <li>10% Student Discount</li>
                </ul>
            </section>
            <section>
                <h4>ABOUT JOYSHOP</h4>
                <ul>
                    <li>About us</li>
                    <li>Carrer</li>
                    <li>Corportate responsibility</li>
                    <li>Investor's site</li>
                    <li>Cyber Security</li>
                </ul>
            </section>
            <section>
                <h4>MORE FROM JOYSHOP</h4>
                <ul>
                    <li>Mobile apps</li>
                    <li>Marketplace</li>
                    <li>Gift voucher</li>
                    <li>Black Friday</li>
                    <li>Fashion</li>
                </ul>
            </section>
            <section>
                <h4>OWNERS</h4>
                <ul>
                    <li><a href="https://github.com/Hoodgail">Hoodley Benjamin</a></li>
                    <li><a href="https://github.com/AaronLiuXM">Yen Chou Aaron Liu</a></li>
                    <li><a href="">Emily Smalka</a></li>
                    <li><a href="https://github.com/Sadjo456">Hassimiou Diallo</a></li>
                </ul>
            </section>
        </footer>
    </body>
</html>
